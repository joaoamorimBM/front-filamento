{% extends "base.html" %}

{% block title %}In√≠cio{% endblock %}

{% block extra-css %}
<link rel="stylesheet" href="/css/home.css">
<style>
    /* Estilos inline do Saldo para garantir que carregue */
    .balance-card {
        background: white;
        padding: 15px 25px;
        border-radius: 12px;
        box-shadow: 0 4px 15px rgba(0,0,0,0.05);
        display: flex;
        align-items: center;
        gap: 20px;
        margin-right: auto; /* Empurra o resto para direita */
        margin-left: 20px;
    }
    .balance-info span { font-size: 0.8rem; color: #7f8c8d; text-transform: uppercase; }
    .balance-info h2 { margin: 0; font-size: 1.8rem; color: #2c3e50; }
    
    .btn-sell {
        background: #2980b9;
        color: white;
        border: none;
        padding: 6px 12px;
        border-radius: 6px;
        cursor: pointer;
        font-weight: bold;
        font-size: 0.8rem;
        transition: background 0.2s;
        margin-left: 10px;
    }
    .btn-sell:hover { background: #3498db; }
    
    .btn-icon { background: none; border: none; cursor: pointer; font-size: 1.2rem; opacity: 0.5; }
    .btn-icon:hover { opacity: 1; }
</style>
{% endblock %}

{% block content %}

<div class="home-container">

    <div class="home-header">
        <h1 class="home-title">Dashboard</h1>
        
        <div class="balance-card">
            <div class="balance-info">
                <span>Saldo Atual</span>
                <h2 id="balance-display">R$ --,--</h2>
            </div>
            <button id="btn-set-balance" class="btn-icon" title="Ajustar Saldo Inicial">‚öôÔ∏è</button>
        </div>

        <button id="btn-sync" class="sync-btn">
            üîÑ Sincronizar Impress√µes
        </button>
    </div>

    <div id="prints-list" class="prints-grid">
        </div>

    <div id="error-box" class="error-box" style="display:none;">
        <p>‚ùå Erro ao carregar impress√µes.</p>
        <button id="btn-retry" class="retry-btn">Tentar Novamente</button>
    </div>

    <div id="details-modal" class="modal-overlay" style="display: none;">
        <div class="modal-content">
            <span class="close-modal">&times;</span>
            <h2 id="modal-title">Detalhes da Impress√£o</h2>
            
            <div class="modal-grid">
                <div class="modal-section">
                    <h3>üìä Dados Gerais</h3>
                    <p><strong>Status:</strong> <span id="modal-status"></span></p>
                    <p><strong>Tempo Total:</strong> <span id="modal-time"></span></p>
                    <p><strong>Peso Usado:</strong> <span id="modal-weight"></span></p>
                    <p><strong>Data:</strong> <span id="modal-date"></span></p>
                </div>

                <div class="modal-section">
                    <h3>üí∞ Custos (R$)</h3>
                    <p>Filamento: <span id="modal-cost-filament"></span></p>
                    <p>Energia: <span id="modal-cost-energy"></span></p>
                    <p>Amortiza√ß√£o: <span id="modal-cost-amort"></span></p>
                    <hr>
                    <p class="total-row"><strong>Custo Total:</strong> <span id="modal-cost-total"></span></p>
                </div>

                <div class="modal-section highlight-section">
                    <h3>üè∑Ô∏è Pre√ßo de Venda</h3>
                    
                    <div class="edit-price-container">
                        <label>Pre√ßo Final (R$):</label>
                        <div class="input-with-button">
                            <input type="number" id="modal-price-input" step="0.01">
                            <button id="btn-save-price" class="btn-save-mini">üíæ Salvar</button>
                        </div>
                        <small>Sugerido: <span id="modal-suggested">R$ 0,00</span></small>
                    </div>

                    <div class="profit-box">
                        <p>Margem L√≠quida: <span id="modal-margin">R$ 0,00</span></p>
                    </div>
                </div>
            </div>
        </div>
    </div>

</div>

<script src="/js/home.js?v=4"></script> {% endblock %}